# 인프라 아키텍처를 살펴보자

# 인프라란 무엇일까?

- 인프라(Infra), 기반, 바탕, 토대
인프라 구조 자체는 복잡하지만, 전문가에 의해 관리되고 있어 사용자는 그 구조를 이해하지 않고도 간단히 이용할 수 있다는 특징이 있다.

# 집약형과 분할형 아키텍처

- IT 인프라는 컴퓨터로 구성된다. 구성 방식에는 집약형과 분할형이 있다.
- 집약형 아키텍처

    하나의 컴퓨터로 모든 처리를 하기 때문에 '집약형'이라고 할 수 있다.
    대형 컴퓨터 - '범용 장비', '호스트', '메인 프레임' 등으로 불렸다.

    - 장점
        - 한 대의 대형 컴퓨터만 있으면 구성이 간단하다
        - 대형 컴퓨터의 리소스 관리나 이중화에 의해 안정성이 높고 고성능이다.
    - 단점
        - 대형 컴퓨터의 도입 비용과 유지 비용이 비싸다
        - 확장성에 한계가 있다.
    - 고민점
        1. 다중화 : CPU 하나가 망가져도 멈추지 않는다.
        2. 리소스 관리 : 고부하 처리 요구가 왔지만 다른 처리에 영향을 주지 않는다.
    - 예

        기업 : 기간 시스템(기업 내 핵심 업무 시스템)

        은행 : '계정 시스템'

- 분할형 아키텍처

    여러 대의 컴퓨터를 조합해서 하나의 시스템을 구축하는 구조이다.

    - 장점
        - 낮은 비용으로 시스템을 구축할 수 있다.
        - 서버 대수를 늘릴 수 있어서 확장성이 높다.
    - 단점
        - 대수가 늘어나면 관리 구조가 복잡해진다.
        - 한 대가 망가지면 영향 범위를 최소화하기 위한 구조를 검토해야 한다.
    - 물리 서버와 논리 서버
        - 물리 서버 : 물건으로는 하나의 컴퓨터(=물리적인) 서버가 동작하고 있다.
        - 논리 서버 : 웹서버 + DB 서버 : 컴퓨터 내부에서는 여러 소프트웨어(=논리적인) 서버가 동작하고 있다.

# 수직 분할형 아키텍처

서버별로 다른 역할을 담당, 특정 서버 측면으로 봤을 때 역할에 따라 '위' 또는 '아래' 계층으로 나뉘기 때문에 수직분할형 아키텍처라 부른다.

- 클라이언트-서버형 아키텍처
    - 클라이언트 : 단말, 소형 컴퓨터를 이용, 전용 소프트웨어
    - 서버 : 모든 클라이언트 처리 접수, 업무 애플리케이션, 미들웨어, 데이터베이스
    - 특징
        - 클라이언트 측에 전용 소프트웨어를 설치해야 한다.
        - 서버측은 데이터 입출력만 하면 되기에 처리당 부하가 낮아서 많은 PC가 동시요청을 보내도 문제가 없다.
        - 업무 애플리케이션 갱신 시마다 정기적인 업데이트 필요
        - 또한 클라이언트 측 소프트웨어도 업데이트 해야됨
        - 서버에 처리가 집중될때 확장성에 한게가 발생할 가능성
        - 이러한 단점을 개선하려고 한 것이 3계층형
    - 장점
        - 클라이언트 측에서 많은 처리를 실행할 수 있어서 소수의 서버로 다수의 클라이언트를 처리할 수 있다.
    - 단점
        - 클라이언트 측의 소프트웨어 정기 업데이트가 필요하다
        - 서버 확장성에 한계가 발생할 수 있다.
- 3계층형 아키텍처
    - 프레젠테이션 계층 : 사용자 요청을 받아서 화면에 표시
    - 애플리케이션 계층 : 무엇을 할지 판단해서 필요한 경우 데이터 계층에 질의
    - 데이터 계층 : 데이터 입출력 담당
    - 장점
        - 서버 부하 집중 개선
        - 클라이언트 단말의 정기 업데이트가 불필요
        - '처리 반환'에 의한 서버 부하 저감
    - 단점
        - 구조가 클라이언트-서버 구성보다 복잡하다.

# 수평 분할형 아키텍처

더 높은 확장성을 실현하려면 다른 하나의 축으로 분할하는 것이 필요

용도가 같은 서버를 늘려나가는 방식이다

대부분의 시스템이 수직분할형과 수평분할형을 함께 채택하고 있다.

- 단순 수평 분할형 아키텍처
    - Sharding(샤딩), Partitioning(파티셔닝)이라고 부르기도 한다.
    - 장점
        - 수평으로 서버를 늘리기 때문에 확장성이 향상된다
        - 분할한 시스템이 독립적으로 운영되므로 서로 영향을 주지 않는다.
    - 단점
        - 데이터를 일원화해서 볼 수 없다.
        - 애플리케이션 업데이트는 양쪽을 동시에 해주어야 한다.
        - 처리량이 균등하게 분할돼 있지 않으면 서버별 처리량에 치우침이 생긴다.
- 공유형 아키텍처
    - 일부 계층에서 상호접속이 이루어진다. (예 : 데이터 동기 처리)
    - 장점
        - 수평으로 서버를 늘리기 때문에 확장성이 향상된다
        - 분할한 시스템이 서로 다른 시스템의 데이터를 참조할 수 있다.
    - 단점
        - 분할한 시스템 간 독립성이 낮아진다.
        - 공유한 계층의 확장성이 낮아진다

집약 → 분산 → 집약 → 분산
아키텍처의 변화
오픈화(분산) → 가상화/클라우드화(집중) → 엣지 컴퓨팅(분산)
지리적으로 가까운 위치에 있는 서버로 처리를 분산하고 처리 결과만 중앙으로 보내는 아키텍처를 '엣지 컴퓨팅'이라 한다.

# 지리 분할형 아키텍처

업무 연속성 및 시스템 가용성을 높이기 위한 방식으로 지리적으로 분할하는 아키텍처

- 스탠바이형 아키텍처
    - 스탠바이 구성, HA(High Availability) 구성, 액티브-스탠바이 구성 등으로 불린다.
    - 물리 서버를 최소 두 대를 준비하여 한 대가 고장나면 가동 중인 소프트웨어를 다른 한 대로 옮겨서 운영하는 방식
    - 이 때 소프트웨어 재시작을 자동으로 하는 구조를 '페일오버(Failover)'라고 한다.(페일, F/O)
- 재해 대책형 아키텍처
    - 서버 장비를 최소 구성 및 동시 구성으로 별도 위치에 배치하고, 소프트웨어도 상용 환경과 동일하게 설정한다. 재해 발생 시 다른 사이트에 있는 정보를 이용