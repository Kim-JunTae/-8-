# Chapter3 REST 웹의 아키텍처 스타일

# 01 아키텍처 스타일의 중요성

### 아키텍처 스타일

복수의 아키텍처의 공통된 성질, 양식, 규정 혹은 독특한 방식을 가리키는 말

ex) MVC(Model-View-Controller)와 파이프 앤 필터(Pipe and Filter), 이벤트 시스템 등이 있습니다.

MVC

파이프 앤 필터

이벤트 시스템

우리가 알고 있는 디자인 패턴은 '마이크로 아키텍처 패턴'이라고도 하며, 아키텍처 스타일보다 입도가 작은 클래스 등의 설계양식을 말합니다.

- 입도 Granularity : 상대적 크기, 비율, 자세한 정도 및 표현의 깊이 등

**시스템의 아키텍처를 결정할 때 나침반이 되는 것이 아키텍처 스타일입니다.**

# 02 아키텍처 스타일로서의 REST

### REST는 네트워크 시스템의 아키텍처 스타일

네트워크 시스템의 아키텍처 스타일로서 가장 유명한 것은 **클라이언트/서버**

**웹의 아키텍처 스타일은 REST이기도 하지만, 클라이언트/서버이기도 합니다. ?**

REST는 클라이언트 서버 구조에서 파생된 아키텍처 스타일입니다.
(REST 아키텍처 스타일 = 클라이언트 서버 스타일 + 몇 가지 제약들)

[웹의 아키텍처 스타일과 아키텍처와 구현](https://www.notion.so/b09d711b03504aa38247443ed0abe19f)

REST는 웹 전체의 아키텍처 스타일이기도 하며, 개별 웹 서비스와 웹 API의 아키텍처 스타일이기도 합니다. 

# 03 리소스

- 웹에서 리소스의 예
    1. 서울의 일기예보
    2. 멘토르 출판사의 '웹을 지탱하는 기술' 페이지
    3. 청량리역의 사진
    4. 논문
    5. 필자의 최근 북마크

    **→ 웹상에 존재하는 이름을 가진 모든 정보**

### 리소스 명칭으로서의 URI

리소스의 이름이란 URI를 말합니다.

1. 서울의 일기예보
http://weather.naver.com/rgn/cityWetrWarea.nhn?cityRgnCd=CT001000
- 리소스란 웹상의 정보이다.
- 전 세계의 무수한 리소스는 각각 URI로 의미있는 이름을 가진다.
- URI를 이용함으로써, 프로그램은 리소스가 표현하는 정보에 접근할 수 있다.

### **리소스의 어드레스 가능성**

- 어드레스 가능성(Addressability) : URI가 지니고 있는 리소스를 간단히 가리킬 수 있는 성질
- 리소스가 제대로 이름이 붙어있고 적절한 수단으로 접근할 수 있는 상태로 만들면 프로그램을 만들기가 아주 쉬워짐(FTP 서버, 로그인 정보, 서버 내 디렉토리 구조 추출 등)

### 복수의 URI를 가진 리소스

1개의 리소스는 복수의 URI를 가질 수 있다.

- http://weather.example.com/seoul/today
- http://weather.example.com/seout/2020-12-25

### 리소스의 표현과 상태

리소스는 '웹상에 존재하는 정보'라는 추상적인 개념
서버와 클라이언트 간에 실제로 리소스를 주고받을 때는 어떤 구체적인 데이터를 서로 송신합니다.

서버와 클라이언트 사이에 주고받는 데이터를 **"Resource Representation"**이라고 부릅니다.

하나의 리소스는 복수의 표현을 가질 수 있다.

- HTML 형식, 텍스트 형식, PDF, 이미지로도 표현가능. 복수 표현에 개별 URI를 부여가능, HTTP 구조를 이용해 하나의 URI로 복수 표현을 반환할 수도 있다.
- 또한 리소스에는 '상태'라는 것이 있어 시간의 경과에 따라 리소스의 상태가 변화면 표현도 변한다. 예로 현재의 일기예보가 맑음 → 흐림으로 변할 수도 있다.

# 04 스타일을 조합하여 REST를 구성한다.

REST는 복수의 아키텍처 스타일을 조합하여 구축한 복합 아키텍처 스타일입니다.

클라이언트/서버 이외의 아키텍처 스타일을 추가하고 제약을 부과하면서, REST를 구축!!!!

### 클라이언트/서버

웹은 HTTP라는 프로토콜을 이용해 클라이언트와 서버가 서로 통신하는 클라이언트/서버의 아키텍처 스타일을 채용하고 있습니다.

클라이언트
<유저 인터페이스 담당>
Request

↔

서버
<데이터 스토리지 담당>
Response

- 장점

    1. 분리해서 처리

    2. 클라이언트를 멀티 플랫폼으로 구성

    3. 복수의 서버를 조합해 확장하여 가용성을 올릴 수 있다.

### 스테이트리스 서버 Stateless Server

클라이언트/서버에 최초로 추가할 아키텍처 스타일은 스테이트리스트서버입니다.

클라이언트의 애플리케이션 상태를 서버에서 관리하지 않는 것을 의미

- 서버가 애플리케이션의 상태를 가지지 않게 되면, 그만큼 서버 측의 구현을 간략화 할 수 있다는 장점이 있다. 간략하게 구현된 서버는 클라이언트로부터의 요청에 응답한 두 ㅣ바로 서버의 자원을 해제할 수 있다.
- 하지만 현실적으로는 스테이트리스가 아닌 웹 서비스와 웹 API가 많이 있습니다. 특히 HTTP를 스테이풀하게 만드는 대표적인 것은 Cookie를 사용한 세션 관리입니다. REST의 관점에서 본다면, Cookie를 사용한 세션 관리는 HTTP의 잘못된 확장입니다. 다만 REST의 기준으로 잘못되었다고 해서 Cookie를 사용한 폼 인증을 그만둘 수 없는 것도 현실입니다.
- Cookie는 스테이트리스 서버의 이점을 버린다는 것을 이해하고 최소한으로 이용합시다.
- **아키텍처 스타일**
**클라이언트/스테이트리스 서버 Client Stateless Server, CSS**

클라이언트

클라이언트

요청마다 모든 정보를 송신

↔

↔

스테이트리스트 서버

클라이언트의 애플리케이션 상태를 관리 X

### 캐시 Cache

리소스의 신선도에 기초해, 한번 가져온 리소스를 클라이언트 쪽에서 돌려쓰는 방식

장점

- 서버와 클라이언트 사이의 통신량을 줄여 네트워크 대역의 이용과 처리시간을 축소
- 더욱 효율적으로 처리

단점

- 오래된 캐시를 이용한다면 정보의 신뢰성이 떨어질 가능성도 있다.
- **아키택처 스타일
클라이언트/캐시/스테이트리스 서버 Client Cache Stateless Server, C$SS**

클라이언트($)

클라이언트($)

같은 요청의 결과를 재이용

↔

↔

스테이트리스트 서버

캐시에 필요한 정보를 클라이언트에게 전달

### 유니폼 인터페이스 Uniform Interface

URI로 지정한 리소스에 대한 조작을 통일되고 한정적인 인터페이스로 수행하는 아키텍처 스타일

인터페이스를 통일함으로써 클라이언트와 서버 구현의 중립성 향상

- **아키텍처 스타일
유니폼/클라이언트/캐시/스테이트리스 서버 Uniform Client Cache Stateless Server, UC$SS**

![Chapter3%20REST%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B4%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20ccfa27f1f03146fca4d5e8d584e315a5/Untitled.png](Chapter3%20REST%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B4%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20ccfa27f1f03146fca4d5e8d584e315a5/Untitled.png)

### 계층화 시스템 Layered System

유니폼 인터페이스의 이점 중 하나로 시스템 전체를 계층화하기 쉽다

예를 들어 웹 서비스에서는 서버와 클라이언트 간의 로드 밸런서를 설치해 부하를 분산시키거나, 프록시를 설치해 엑세스를 제어한다. 클라이언트 측에서 보면, 서버나 프록시 모두 동일한 인터페이스로 접속할 수 있기 때문에 접속할 곳이 서버에서 프록시로 바뀐 것을 신경 쓸 필요가 없다.

이것은 서버와 프록시 등 각 컴포넌트 간의 인터페이스를 HTTP로 통일하고 있기 때문

또한 기간계 레거시 시스템? 등 HTTP의 인터페이스를 구현하지 않는 시스템에서도 레거시 시스템 앞단에 웹 애플리케이션 서버를 끼워넣고 HTTP의 인터페이스를 가지게 함으로써, 브라우저 등의 클라이언트와 접속할 수 있게 된다.

이와 같이 시스템을 몇 개의 계층으로 분리하는 아키텍처 스타일을 계층화 시스템이라고 합니다.

- **아키텍처 스타일
유니폼/계층화/클라이언트/캐시/스테이트리스 서버 Uniform Layered Client Cache Stateless Server, ULC$SS**

![Chapter3%20REST%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B4%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20ccfa27f1f03146fca4d5e8d584e315a5/Untitled%201.png](Chapter3%20REST%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B4%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20ccfa27f1f03146fca4d5e8d584e315a5/Untitled%201.png)

### 코드 온 디맨드 Code on Demand

프로그램 코드를 서버에서 다운받아 클라이언트에서 실행하는 아키텍처 스타일

예를 들어 JavaScript, Flash, Java 애플릿 등

장점

- 클라이언트를 차후에 확장할 수 있다.

결점

- 네트워크 통신에서의 프로토콜 가시성이 저하
- **아키텍처스타일
유니폼/계층화/코드 온 디멘드/클라이언트/캐시/스테이트리스 서버
Uniform Layered Code on Demand Client Cache Stateless Server, ULCODC$SS**

![Chapter3%20REST%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B4%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20ccfa27f1f03146fca4d5e8d584e315a5/Untitled%202.png](Chapter3%20REST%20%E1%84%8B%E1%85%B0%E1%86%B8%E1%84%8B%E1%85%B4%20%E1%84%8B%E1%85%A1%E1%84%8F%E1%85%B5%E1%84%90%E1%85%A6%E1%86%A8%E1%84%8E%E1%85%A5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%A1%E1%84%8B%E1%85%B5%E1%86%AF%20ccfa27f1f03146fca4d5e8d584e315a5/Untitled%202.png)

### REST = ULCODC$SS

REST란 다시 말해, 다음 6가리르 조합한 아키텍처 스타일을 가리키는 것

- 클라이언트/서버 : 유저 인터페이스와 처리를 분리한다.
- 스테이트리스 서버 : 서버 측에서 어플리케이션을 상태를 가지지 않는다.
- 캐시 : 클라이언트와 서버의 통신횟수와 양을 감소시킨다.
- 유니폼 인터페이스 : 인터페이스를 고정한다.
- 계층화 시스템 : 시스템을 계층별로 분리한다.
- 코드 온 디맨드 : 프로그램을 클라이언트에 다운로드하여 실행한다.

### REST 이외의 아키텍처 스타일

- P2P Peer to Peer

    서버를 거치지 않고, 피어 사이에서의 통신
    피어란 분산 네트워크상의 각 노드(컴퓨터)를 말합니다.

# 05 REST의 2가지 측면

REST와 하이퍼미디어, REST와 분산 시스템의 관계

### REST와 하이퍼미디어

웹, 링크를 따라가면서 다양한 리소스에 접근

웹이 가진 이 특징을 REST에서는 애플리케이션 상태 엔진으로서의 하이퍼미디어라고 합니다.
Hypermedia as the engine of application state

애플리케이션 상태란? '북마크 목록을 표시하고 있다' '새로운 북마크를 추가하고 있다' 등 상태의 구체적인 예. 하이퍼미디어의 링크를 따라가는 작업에 의해 변화

- 접속성 : 리소스를 링크로 연결하여 하나의 애플리케이션을 구성한다는 개념

### REST와 분산 시스템

RPC, CORBA, DCOM 등의 분산 오브젝트에서는 함수나 메서드 단위로 서버 쪽의 처리를 호출

링크를 따라 애플리케이션의 상태를 변화시키는 편이 전체적인 성능저하를 억제할 수 있다.

REST에 기초한 웹에서는 유니폼 인터페이스에 의해 인터페이스가 고정되어 있어 호환성 문제가 발생하지 않습니다.

# 06 REST의 의미

**RESTful : REST의 제약에 따르고 있고, REST다운 것을 RESTful이라고 합니다.**