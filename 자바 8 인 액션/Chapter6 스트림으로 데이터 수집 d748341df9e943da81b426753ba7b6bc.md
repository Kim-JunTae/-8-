# Chapter6 스트림으로 데이터 수집

이 장의 내용
- Collectors 클래스로 컬렉션을 만들고 사용하기
- 하나의 값으로 데이터 스트림 리듀스하기
- 특별한 리듀싱 요약 연산
- 데이터 그룹화와 분할?
- 자신만의 커스텀 컬렉터 개발

# 6.1 컬렉터란 무엇인가?

함수형 프로그래밍의 편리성, 무엇을 원하는지 직접 명시할 수 있어 어떤 방법으로 얻을것인짖 신경쓸 필요가 없다.

## 6.1.1 고급 리듀싱 기능을 수행하는 컬렉터

![Chapter6%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B3%E1%84%85%E1%85%A9%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%B5%E1%86%B8%20d748341df9e943da81b426753ba7b6bc/Untitled.png](Chapter6%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B3%E1%84%85%E1%85%A9%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%B5%E1%86%B8%20d748341df9e943da81b426753ba7b6bc/Untitled.png)

## 6.1.2 미리 정의된 컬렉터

Collectors 클래스에서 제공하는 팩토리 메서드의 기능(ex : groupingBy)

### Collectors에서 제공하는 메서드의 기능

- 스트림 요소를 하나의 값으로 리듀스하고 요약
- 요소 그룹화
- 요소 분할

# 6.2 리듀싱과 요약

## 6.2.1 스트림값에서 최댓값과 최솟값 검색

Collectors.maxBy, Collectors.minBy

→ 스트림의 요소를 비교하는데 사용할 Comparator를 인수로 받는다.

```html
Comparator<Dish> dishCaloriesComparator = Comparator.comparingInt(Dish::getCalories);

Optional<Dish> mostCalorieDish = menu.stream().collect(maxBy(dishCaloriesComparator));
```

## 6.2.2 요약 연산

Collectors 클래스는 summingInt 팩토리 메서드를 제공한다. 

객체를 int로 매핑하는 함수를 인수로 받아 int로 매핑한 컬렉터를 반환한다.

```html
int totalCalories = menu.stream().collect(summingInt(Dish::getCalories));
```

![Chapter6%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B3%E1%84%85%E1%85%A9%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%B5%E1%86%B8%20d748341df9e943da81b426753ba7b6bc/Untitled%201.png](Chapter6%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%E1%84%8B%E1%85%B3%E1%84%85%E1%85%A9%20%E1%84%83%E1%85%A6%E1%84%8B%E1%85%B5%E1%84%90%E1%85%A5%20%E1%84%89%E1%85%AE%E1%84%8C%E1%85%B5%E1%86%B8%20d748341df9e943da81b426753ba7b6bc/Untitled%201.png)

## 6.2.3 문자열 연결

컬렉터에 joining 팩토리 메서드를 이용하면 스트림의 각 객체에 toString 메서드를 호출해서 추출한 모든 문자열을 하나의 문자열로 연결해서 반환한다.

```html
String shortMenu = menu.stream().map(Dish::getName).collect(joining());

String shortMenu = menu.stream().map(Dish::getName).collect(joining(", "));
```

내부적으로 StringBuilder를 이용해서 문자열을 하나로 만든다.

## 6.2.4 범용 리듀싱 요약 연산

앞선 6.2.1~6.2.3 컬렉터들 reducing 팩토리 메서드로도 정의할 수 있다.

But..... 편의성과 가독성이 떨어진다.