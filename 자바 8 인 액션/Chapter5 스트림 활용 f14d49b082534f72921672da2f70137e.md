# Chapter5 스트림 활용

이 장의 내용
◾ 필터링, 슬라이싱, 매칭
◾ 검색, 매칭, 리듀싱
◾ 특정 범위의 숫자와 같은 숫자 스트림 사용하기
◾ 다중 소스로부터 스트림 만들기
◾ 무한 스트림

# 5.1 필터링과 슬라이싱

## 5.1.1 프레디케이트로 필터링

![Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled.png](Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled.png)

## 5.1.2 고유 요소 필터링

![Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%201.png](Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%201.png)

## 5.1.3 스트림 축소

![Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%202.png](Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%202.png)

## 5.1.4 요소 건너뛰기

![Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%203.png](Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%203.png)

# 5.2 매핑

## 5.2.1 스트림의 각 요소에 함수 적용하기

## 5.2.2 스트림 평면화

- map과 Arrays.stream 활용

![Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%204.png](Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%204.png)

- flatMap 사용

![Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%205.png](Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%205.png)

# 5.3 검색과 매칭

## 5.3.1 프레디케이트가 적어도 한 요소와 일치하는지 확인

- anyMatch : 프레디케이트가 주어진 스트림에서 적어도 한 요소와 일치하는지 확인

## 5.3.2 프레디케이트가 모든 요소와 일치하는지 검사

- allMatch : 모든 요소가 주어진 프레디케이트와 일치하는지 확인
- noneMatch :  allMatch와 반대 연산 수행

## 5.3.3 요소 검색

- findAny : 현재 스트림에서 임의의 요소 반환

### Optional이란?

Optional<T> 클래스(java.util.Optional) : 값의 존재나 부재 여부를 표현하는 컨테이너 클래스

findAny는 아무 요소도 반환하지 않을 수 있어, null 포인트 에러가 생길 수 있음.

```java
menu.stream()
		.filter(Dish::isVegetarian)
		.findAny()  //Optional<Dish> 반환
		.ifPresent(d -> System.out.println(d.getName()); //값이 있으면 출력, 없으면 아무일도 없음
```

## 5.3.4 첫 번째 요소 찾기

- findFirst : 스트림은 병렬성 때문에 첫번째 요소를 찾기 위함

# 5.4 리듀싱

리듀싱 연산 : 모든 스트림 요소를 처리해서 값으로 도출하는 연산 (=폴드)

## 5.4.1 요소의 합

비교해보자

```java
//for-each 루프
int sum = 0;
for(int x : numbers){
	sum += x;
}

//reduce, 초기값 있음
int sum = numbers.stream().reduce(0, (a,b) -> a + b);

//reduce, 초기값 없음
Optional<Integer> sum = numbers.stream().reduce((a,b) -> (a+b));
```

## 5.4.2 최댓값과 최솟값

```java
Optional<Integer> max = numbers.stream().reduce(Integer::max);

Optional<Integer> min = numbers.stream().reduce(Integer::min);
```

### reduce 메서드의 장점과 병렬화

- ?

### 스트림 연산 : 상태 없음과 상태 있음

![Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%206.png](Chapter5%20%E1%84%89%E1%85%B3%E1%84%90%E1%85%B3%E1%84%85%E1%85%B5%E1%86%B7%20%E1%84%92%E1%85%AA%E1%86%AF%E1%84%8B%E1%85%AD%E1%86%BC%20f14d49b082534f72921672da2f70137e/Untitled%206.png)

# 5.5 실전 연습

# 5.6 숫자형 스트림

### 5.6.1 기본형 특화 스트림

- 숫자 스트림으로 매핑 : mapToInt, mapToDouble, mapToLong
- 객체 스트림으로 복원하기 : 숫자스트림을 만든 후 다시 스트림으로

```java
IntStream intStream = menu.stream().mapToInt(Dish::getCalories);
Stream<Integer> stream = intStream.boxed(); // 숫자 스트림을 스트림으로 변환
```

- 기본값: OptionalInt, 컨테이너 클래스 Optional

# 5.7 스트림 만들기